/*! For license information please see main.1bcc376e.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-state-events-example"]=this["webpackJsonpreact-state-events-example"]||[]).push([[0],{1:function(e,t,n){e.exports={block:"common_block__17hC1",value:"common_value__2JYp1",controls:"common_controls__14pdo"}},15:function(e,t,n){"use strict";n.r(t);n(7);var r=n(0),o=n.n(r),a=n(4),s=n.n(a);function i(e,t){return e(t={exports:{}},t.exports),t.exports}var c="function"===typeof Symbol&&Symbol.for,u=c?Symbol.for("react.element"):60103,l=c?Symbol.for("react.portal"):60106,f=c?Symbol.for("react.fragment"):60107,d=c?Symbol.for("react.strict_mode"):60108,p=c?Symbol.for("react.profiler"):60114,m=c?Symbol.for("react.provider"):60109,E=c?Symbol.for("react.context"):60110,y=c?Symbol.for("react.async_mode"):60111,v=c?Symbol.for("react.concurrent_mode"):60111,b=c?Symbol.for("react.forward_ref"):60112,h=c?Symbol.for("react.suspense"):60113,_=c?Symbol.for("react.suspense_list"):60120,T=c?Symbol.for("react.memo"):60115,S=c?Symbol.for("react.lazy"):60116,O=c?Symbol.for("react.block"):60121,w=c?Symbol.for("react.fundamental"):60117,g=c?Symbol.for("react.responder"):60118,C=c?Symbol.for("react.scope"):60119;function j(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case u:switch(e=e.type){case y:case v:case f:case p:case d:case h:return e;default:switch(e=e&&e.$$typeof){case E:case b:case S:case T:case m:return e;default:return t}}case l:return t}}}function N(e){return j(e)===v}var P={AsyncMode:y,ConcurrentMode:v,ContextConsumer:E,ContextProvider:m,Element:u,ForwardRef:b,Fragment:f,Lazy:S,Memo:T,Portal:l,Profiler:p,StrictMode:d,Suspense:h,isAsyncMode:function(e){return N(e)||j(e)===y},isConcurrentMode:N,isContextConsumer:function(e){return j(e)===E},isContextProvider:function(e){return j(e)===m},isElement:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===u},isForwardRef:function(e){return j(e)===b},isFragment:function(e){return j(e)===f},isLazy:function(e){return j(e)===S},isMemo:function(e){return j(e)===T},isPortal:function(e){return j(e)===l},isProfiler:function(e){return j(e)===p},isStrictMode:function(e){return j(e)===d},isSuspense:function(e){return j(e)===h},isValidElementType:function(e){return"string"===typeof e||"function"===typeof e||e===f||e===v||e===p||e===d||e===h||e===_||"object"===typeof e&&null!==e&&(e.$$typeof===S||e.$$typeof===T||e.$$typeof===m||e.$$typeof===E||e.$$typeof===b||e.$$typeof===w||e.$$typeof===g||e.$$typeof===C||e.$$typeof===O)},typeOf:j},k=(i((function(e,t){0})),i((function(e){e.exports=P})),Object.getOwnPropertySymbols),D=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;function R(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}})()&&Object.assign;var A="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function $(e,t,n,r,o){}$.resetWarningCache=function(){0};function x(){}function L(){}L.resetWarningCache=x;var W=i((function(e){e.exports=function(){function e(e,t,n,r,o,a){if(a!==A){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:L,resetWarningCache:x};return n.PropTypes=n,n}()})),M=0,V=function(){function e(e,t){var n=this;this.handlers=[],this.current=e;var r=t||"Anonymous";console.log(JSON.stringify("production"));var o=String(++M);this.streamId=o,"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&(window.postMessage({type:"react-state-event-devTool-streamId",payload:r,id:o},"*"),window.addEventListener("message",(function(e){e.origin===window.origin&&e.source===window&&"react-state-event-devTool-set"===e.data.type&&e.data.id===n.streamId&&(n.current=e.data.payload,n.callHandlers(e.data.payload))})))}var t=e.prototype;return t.subscribe=function(e,t){this.handlers.push({callback:e,onError:t})},t.unsubscribe=function(e){this.handlers=this.handlers.filter((function(t){return t.callback!==e}))},t.unsubscribeAll=function(){this.handlers=[]},t.getCurrent=function(){return this.current},t.publish=function(e){this.current=e,"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL?window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"StateEvents",streamId:this.streamId,success:!0,value:e}},"*"):console.log("In production mode!"),this.callHandlers(e)},t.error=function(e){"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"StateEvents",streamId:this.streamId,success:!1,value:e}},"*"),this.handlers.forEach((function(t){if(!t.onError)throw e;t.onError(e)}))},t.callHandlers=function(e){this.handlers.forEach((function(t){try{t.callback(e)}catch(n){if(!t.onError)throw n;t.onError(n)}}))},e}(),H=function(){function e(e,t){var n=this;this.handlers=[],this.current=e,this.name=t,this.initTimer=setTimeout((function(){n.initialize()}),500),setTimeout((function(){window.postMessage({type:"react-state-event-initrequest",name:t},window.origin)}),1e3)}var t=e.prototype;return t.subscribe=function(e,t){var n=this;this.handlers.push({callback:e,onError:t}),window.addEventListener("message",(function(r){if(r.origin===window.origin&&r.source===window&&r.data.name===n.name){switch(r.data.type){case"react-state-event-initresponse":if(r.data.success){if(n.isInitialized())return;n.initialize()}break;case"react-state-event":n.initialize();break;case"react-state-event-initrequest":return void(n.isInitialized()&&window.postMessage({type:"react-state-event-initresponse",name:n.name,success:!0,payload:n.current},window.origin));default:return}if(r.data.success)try{n.current=r.data.payload,e(r.data.payload)}catch(o){if(!t)throw o;t(o)}else t&&t(r.data.payload)}}),!0)},t.isInitialized=function(){return null===this.initTimer},t.initialize=function(){null!=this.initTimer&&(clearTimeout(this.initTimer),this.initTimer=null)},t.unsubscribe=function(e){this.handlers=this.handlers.filter((function(t){return t.callback!==e})),window.removeEventListener("message",e,!0)},t.unsubscribeAll=function(){this.handlers.forEach((function(e){return window.removeEventListener("message",e.callback,!0)})),this.handlers=[]},t.getCurrent=function(){return this.current},t.publish=function(e){this.current=e,window.postMessage({type:"react-state-event",name:this.name,success:!0,payload:e},window.origin),"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"ExternalStateEvents",streamId:this.name,success:!0,value:e}},"*")},t.error=function(e){window.postMessage({type:"react-state-event",name:this.name,success:!1,payload:e},window.origin),"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"ExternalStateEvents",streamId:this.name,success:!0,value:e}},"*")},e}(),K=function(e,t){var n=Object(r.useState)(e.getCurrent()),o=n[0],a=n[1];Object(r.useEffect)((function(){var n=function(e){return a(e)};if(t){e.subscribe(n,(function(e){return t(e)}))}else e.subscribe(n);return function(){return e.unsubscribe(n)}}),[]);return[o,function(t){return e.publish(t)}]};K.propTypes={stateEvents:W.object.isRequired,onError:W.func};var U=function(e){var t=e.stateEvents,n=e.children,o=e.onError,a=Object(r.useState)(t.getCurrent()),s=a[0],i=a[1];return Object(r.useEffect)((function(){var e=function(e){return i(e)};if(o){t.subscribe(e,(function(e){return o(e)}))}else t.subscribe(e);return function(){return t.unsubscribe(e)}}),[]),n(s)};U.propTypes={stateEvents:W.object.isRequired,children:W.func.isRequired,onError:W.func};var z=n(5),F=n(1),q=n.n(F),B=function(e){var t=e.stateEvents,n=K(t,(function(e){console.log("FromHook handled error:",e)})),r=Object(z.a)(n,2),a=r[0],s=r[1];return o.a.createElement("div",{className:q.a.block},o.a.createElement("div",{className:q.a.value},a),o.a.createElement("div",{className:q.a.controls},o.a.createElement("button",{onClick:function(){return s(a+1)}},"add"),o.a.createElement("button",{onClick:function(){return t.error("Error sent in FromHook")}},"error")))},J=function(e){var t=e.stateEvents,n=function(){t.publish(t.getCurrent()+1)};return o.a.createElement(U,{stateEvents:t,onError:function(e){console.log("FromComponent handled error:",e)}},(function(e){return o.a.createElement("div",{className:q.a.block},o.a.createElement("div",{className:q.a.value},e),o.a.createElement("div",{className:q.a.controls},o.a.createElement("button",{onClick:n},"add"),o.a.createElement("button",{onClick:function(){return t.error("Error sent in FromComponent")}},"error")))}))},Y=n(2),G=n.n(Y),Q=function(e){var t=new V(0,"single counter"),n=new H(0,"counter"),r=new H(0,"counter");return o.a.createElement("div",{className:G.a.app},o.a.createElement("div",{className:G.a.context},o.a.createElement("h1",null,"StateEvents"),o.a.createElement("div",null,o.a.createElement("div",{className:G.a.type},o.a.createElement("h2",null,"useStateEvents hook"),o.a.createElement(B,{stateEvents:t})),o.a.createElement("div",{className:G.a.type},o.a.createElement("h2",null,"Subscription class"),o.a.createElement(J,{stateEvents:t})))),o.a.createElement("div",{className:G.a.context},o.a.createElement("h1",null,"ExternalStateEvents"),o.a.createElement("div",null,o.a.createElement("div",{className:G.a.type},o.a.createElement("h2",null,"useStateEvents hook"),o.a.createElement(B,{stateEvents:n})),o.a.createElement("div",{className:G.a.type},o.a.createElement("h2",null,"Subscription class"),o.a.createElement(J,{stateEvents:r})))))};s.a.render(o.a.createElement(Q,null),document.getElementById("root"))},2:function(e,t,n){e.exports={app:"App_app__2pceo",context:"App_context__31Iva",type:"App_type__3SMJs"}},6:function(e,t,n){e.exports=n(15)},7:function(e,t,n){}},[[6,1,2]]]);
//# sourceMappingURL=main.1bcc376e.chunk.js.map