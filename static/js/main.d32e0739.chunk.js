/*! For license information please see main.d32e0739.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-state-events-example"]=this["webpackJsonpreact-state-events-example"]||[]).push([[0],{1:function(e,t,n){e.exports={block:"common_block__17hC1",value:"common_value__2JYp1",controls:"common_controls__14pdo"}},15:function(e,t,n){"use strict";n.r(t);n(7);var r=n(0),a=n.n(r),o=n(5),i=n.n(o),s=0,c=function(){function e(e,t){var n=this;this.handlers=[],this.current=e;var r=String(++s),a=t||""+r;this.streamId=r,"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&(setTimeout((function(){window.postMessage({type:"react-state-event-devTool-streamId",payload:a,id:r},"*")}),1e3),window.addEventListener("message",(function(e){e.origin===window.origin&&e.source===window&&"react-state-event-devTool-set"===e.data.type&&e.data.id===n.streamId&&(n.current=e.data.payload,n.callHandlers(e.data.payload))})))}var t=e.prototype;return t.subscribe=function(e,t){this.handlers.push({callback:e,onError:t})},t.unsubscribe=function(e){this.handlers=this.handlers.filter((function(t){return t.callback!==e}))},t.unsubscribeAll=function(){this.handlers=[]},t.getCurrent=function(){return this.current},t.publish=function(e){this.current=e,"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"StateEvents",streamId:this.streamId,success:!0,value:e}},"*"),this.callHandlers(e)},t.error=function(e){"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"StateEvents",streamId:this.streamId,success:!1,value:e}},"*"),this.handlers.forEach((function(t){if(!t.onError)throw e;t.onError(e)}))},t.callHandlers=function(e){this.handlers.forEach((function(t){try{t.callback(e)}catch(n){if(!t.onError)throw n;t.onError(n)}}))},e}(),l=function(){function e(e,t){this.current=e,this.name=t,this.initTimer=null,this.timestamp=null,this.callbacks=[],this.handler=null,this.nape=t}var t=e.prototype;return t.subscribe=function(e,t){var n=this;if(this.callbacks.push({callback:e,onError:t}),1===this.callbacks.length){var r=function(r){if(r.origin===window.origin&&r.source===window&&r.data.name===n.name){switch(r.data.type){case"react-state-event-initresponse":if(r.data.success){if(n.isInitialized())return;n.current=r.data.payload,n.initialize()}break;case"react-state-event":n.initialize();break;case"react-state-event-initrequest":return void(n.isInitialized()&&n.timestamp<r.data.timing&&window.postMessage({type:"react-state-event-initresponse",name:n.name,success:!0,payload:n.current,timing:n.timing},window.origin));default:return}if(r.data.success)try{n.current=r.data.payload,e(r.data.payload)}catch(a){if(!t)throw a;t(a)}else{if(!t)throw r.data.payload;t(r.data.payload)}}}.bind(this);this.handler={callback:e,wrappedCallback:r,onError:t},window.addEventListener("message",r,!0),window.postMessage({type:"react-state-event-initrequest",name:this.name,timing:Date.now()},window.origin),this.initTimer=setTimeout((function(){n.initialize()}),500)}},t.isInitialized=function(){return null!==this.timestamp},t.initialize=function(){null!==this.initTimer&&(clearTimeout(this.initTimer),this.initTimer=null,this.timestamp=Date.now())},t.uninitialize=function(){null!==this.initTimer&&(clearTimeout(this.initTimer),this.initTimer=null,this.timestamp=null)},t.unsubscribe=function(e){if(this.callbacks.find((function(t){return t.callback===e}))&&(this.callbacks=this.callbacks.filter((function(t){return t.callback!==e})),0===this.callbacks.length)){var t=this.handler.wrappedCallback;window.removeEventListener("message",t,!0),this.handler=null,this.uninitialize()}},t.unsubscribeAll=function(){if(this.handler){var e=this.handler.wrappedCallback;window.removeEventListener("message",e,!0),this.callbacks=[],this.handler=null,this.uninitialize()}},t.getCurrent=function(){return this.current},t.publish=function(e){this.current=e,window.postMessage({type:"react-state-event",name:this.name,success:!0,payload:e},window.origin),"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"ExternalStateEvents",streamId:this.name,success:!0,value:e}},"*")},t.error=function(e){window.postMessage({type:"react-state-event",name:this.name,success:!1,payload:e},window.origin),"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_STATE_EVENT_DEVTOOL&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"ExternalStateEvents",streamId:this.name,success:!0,value:e}},"*")},e}();function u(e,t){return e(t={exports:{}},t.exports),t.exports}var d="function"===typeof Symbol&&Symbol.for,f=d?Symbol.for("react.element"):60103,p=d?Symbol.for("react.portal"):60106,m=d?Symbol.for("react.fragment"):60107,E=d?Symbol.for("react.strict_mode"):60108,b=d?Symbol.for("react.profiler"):60114,h=d?Symbol.for("react.provider"):60109,v=d?Symbol.for("react.context"):60110,y=d?Symbol.for("react.async_mode"):60111,T=d?Symbol.for("react.concurrent_mode"):60111,_=d?Symbol.for("react.forward_ref"):60112,S=d?Symbol.for("react.suspense"):60113,O=d?Symbol.for("react.suspense_list"):60120,w=d?Symbol.for("react.memo"):60115,g=d?Symbol.for("react.lazy"):60116,C=d?Symbol.for("react.block"):60121,k=d?Symbol.for("react.fundamental"):60117,j=d?Symbol.for("react.responder"):60118,N=d?Symbol.for("react.scope"):60119;function P(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case f:switch(e=e.type){case y:case T:case m:case b:case E:case S:return e;default:switch(e=e&&e.$$typeof){case v:case _:case g:case w:case h:return e;default:return t}}case p:return t}}}function D(e){return P(e)===T}var R={AsyncMode:y,ConcurrentMode:T,ContextConsumer:v,ContextProvider:h,Element:f,ForwardRef:_,Fragment:m,Lazy:g,Memo:w,Portal:p,Profiler:b,StrictMode:E,Suspense:S,isAsyncMode:function(e){return D(e)||P(e)===y},isConcurrentMode:D,isContextConsumer:function(e){return P(e)===v},isContextProvider:function(e){return P(e)===h},isElement:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===f},isForwardRef:function(e){return P(e)===_},isFragment:function(e){return P(e)===m},isLazy:function(e){return P(e)===g},isMemo:function(e){return P(e)===w},isPortal:function(e){return P(e)===p},isProfiler:function(e){return P(e)===b},isStrictMode:function(e){return P(e)===E},isSuspense:function(e){return P(e)===S},isValidElementType:function(e){return"string"===typeof e||"function"===typeof e||e===m||e===T||e===b||e===E||e===S||e===O||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===w||e.$$typeof===h||e.$$typeof===v||e.$$typeof===_||e.$$typeof===k||e.$$typeof===j||e.$$typeof===N||e.$$typeof===C)},typeOf:P},A=(u((function(e,t){0})),u((function(e){e.exports=R})),Object.getOwnPropertySymbols),I=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;function x(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}})()&&Object.assign;var L="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function M(e,t,n,r,a){}M.resetWarningCache=function(){0};function W(){}function V(){}V.resetWarningCache=W;var H=u((function(e){e.exports=function(){function e(e,t,n,r,a,o){if(o!==L){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:V,resetWarningCache:W};return n.PropTypes=n,n}()}));function K(e,t){var n=Object(r.useState)(e.getCurrent()),a=n[0],o=n[1];Object(r.useEffect)((function(){var n=function(e){return o(e)};if(t){e.subscribe(n,(function(e){return t(e)}))}else e.subscribe(n);return function(){return e.unsubscribe(n)}}),[]);return[a,function(t){return e.publish(t)}]}function z(e){var t=e.stateEvents,n=e.children,a=e.onError,o=Object(r.useState)(t.getCurrent()),i=o[0],s=o[1];return Object(r.useEffect)((function(){var e=function(e){return s(e)};if(a){t.subscribe(e,(function(e){return a(e)}))}else t.subscribe(e);return function(){return t.unsubscribe(e)}}),[]),"function"===typeof n?n(i):null}K.propTypes={stateEvents:H.object.isRequired,onError:H.func},z.propTypes={stateEvents:H.object.isRequired,children:H.func.isRequired,onError:H.func};var U=n(3),F=n(1),q=n.n(F),B=function(e){var t=e.stateEvents,n=K(t,(function(e){console.log("FromHook handled error:",e)})),r=Object(U.a)(n,2),o=r[0],i=r[1];return a.a.createElement("div",{className:q.a.block},a.a.createElement("div",{className:q.a.value},o),a.a.createElement("div",{className:q.a.controls},a.a.createElement("button",{onClick:function(){return i(o+1)}},"add"),a.a.createElement("button",{onClick:function(){return t.error("Error sent in FromHook")}},"error")))},J=function(e){var t=e.stateEvents,n=function(){t.publish(t.getCurrent()+1)};return a.a.createElement(z,{stateEvents:t,onError:function(e){console.log("FromComponent handled error:",e)}},(function(e){return a.a.createElement("div",{className:q.a.block},a.a.createElement("div",{className:q.a.value},e),a.a.createElement("div",{className:q.a.controls},a.a.createElement("button",{onClick:n},"add"),a.a.createElement("button",{onClick:function(){return t.error("Error sent in FromComponent")}},"error")))}))},Y=function(e){var t=a.a.useState(!1),n=Object(U.a)(t,2),r=n[0],o=n[1];return r?a.a.createElement(a.a.Fragment,null,e.children||null):a.a.createElement("div",{className:q.a.block},a.a.createElement("div",{className:q.a.controls},a.a.createElement("button",{onClick:function(){o(!0)}},"Mount")))},G=n(2),Q=n.n(G),X=function(){var e=new c(0,"single counter"),t=new l(0,"counter"),n=new l(0,"counter");return a.a.createElement("div",null,a.a.createElement("span",{className:Q.a.mode},"production mode"),a.a.createElement("div",{className:Q.a.app},a.a.createElement("div",{className:Q.a.context},a.a.createElement("h1",null,"StateEvents"),a.a.createElement("div",null,a.a.createElement("div",{className:Q.a.type},a.a.createElement("h2",null,"useStateEvents hook"),a.a.createElement(Y,null,a.a.createElement(B,{stateEvents:e}))),a.a.createElement("div",{className:Q.a.type},a.a.createElement("h2",null,"Subscription class"),a.a.createElement(Y,null,a.a.createElement(J,{stateEvents:e}))))),a.a.createElement("div",{className:Q.a.context},a.a.createElement("h1",null,"ExternalStateEvents"),a.a.createElement("div",null,a.a.createElement("div",{className:Q.a.type},a.a.createElement("h2",null,"useStateEvents hook"),a.a.createElement(Y,null,a.a.createElement(B,{stateEvents:t}))),a.a.createElement("div",{className:Q.a.type},a.a.createElement("h2",null,"Subscription class"),a.a.createElement(Y,null,a.a.createElement(J,{stateEvents:n})))))))};i.a.render(a.a.createElement(X,null),document.getElementById("root"))},2:function(e,t,n){e.exports={app:"App_app__2pceo",mode:"App_mode__BvU0f",context:"App_context__31Iva",type:"App_type__3SMJs"}},6:function(e,t,n){e.exports=n(15)},7:function(e,t,n){}},[[6,1,2]]]);
//# sourceMappingURL=main.d32e0739.chunk.js.map