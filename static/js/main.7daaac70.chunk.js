/*! For license information please see main.7daaac70.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-state-events-example"]=this["webpackJsonpreact-state-events-example"]||[]).push([[0],{13:function(e,t,n){"use strict";n.r(t);n(5);var r=n(0),o=n.n(r),i=n(2),a=n.n(i);function s(e,t){return e(t={exports:{}},t.exports),t.exports}var c="function"===typeof Symbol&&Symbol.for,u=c?Symbol.for("react.element"):60103,l=c?Symbol.for("react.portal"):60106,f=c?Symbol.for("react.fragment"):60107,p=c?Symbol.for("react.strict_mode"):60108,d=c?Symbol.for("react.profiler"):60114,m=c?Symbol.for("react.provider"):60109,b=c?Symbol.for("react.context"):60110,y=c?Symbol.for("react.async_mode"):60111,h=c?Symbol.for("react.concurrent_mode"):60111,v=c?Symbol.for("react.forward_ref"):60112,E=c?Symbol.for("react.suspense"):60113,w=c?Symbol.for("react.suspense_list"):60120,g=c?Symbol.for("react.memo"):60115,S=c?Symbol.for("react.lazy"):60116,O=c?Symbol.for("react.block"):60121,C=c?Symbol.for("react.fundamental"):60117,j=c?Symbol.for("react.responder"):60118,k=c?Symbol.for("react.scope"):60119;function T(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case u:switch(e=e.type){case y:case h:case f:case d:case p:case E:return e;default:switch(e=e&&e.$$typeof){case b:case v:case S:case g:case m:return e;default:return t}}case l:return t}}}function $(e){return T(e)===h}var P={AsyncMode:y,ConcurrentMode:h,ContextConsumer:b,ContextProvider:m,Element:u,ForwardRef:v,Fragment:f,Lazy:S,Memo:g,Portal:l,Profiler:d,StrictMode:p,Suspense:E,isAsyncMode:function(e){return $(e)||T(e)===y},isConcurrentMode:$,isContextConsumer:function(e){return T(e)===b},isContextProvider:function(e){return T(e)===m},isElement:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===u},isForwardRef:function(e){return T(e)===v},isFragment:function(e){return T(e)===f},isLazy:function(e){return T(e)===S},isMemo:function(e){return T(e)===g},isPortal:function(e){return T(e)===l},isProfiler:function(e){return T(e)===d},isStrictMode:function(e){return T(e)===p},isSuspense:function(e){return T(e)===E},isValidElementType:function(e){return"string"===typeof e||"function"===typeof e||e===f||e===h||e===d||e===p||e===E||e===w||"object"===typeof e&&null!==e&&(e.$$typeof===S||e.$$typeof===g||e.$$typeof===m||e.$$typeof===b||e.$$typeof===v||e.$$typeof===C||e.$$typeof===j||e.$$typeof===k||e.$$typeof===O)},typeOf:T},x=(s((function(e,t){0})),s((function(e){e.exports=P})),Object.getOwnPropertySymbols),_=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function I(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}})()&&Object.assign;var z="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function F(e,t,n,r,o){}F.resetWarningCache=function(){0};function R(){}function q(){}q.resetWarningCache=R;var L=s((function(e){e.exports=function(){function e(e,t,n,r,o,i){if(i!==z){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:q,resetWarningCache:R};return n.PropTypes=n,n}()})),A=0,H=function(){function e(e,t){var n=this;this.handlers=[],this.current=e;var r=t||"Anonymous";console.log(JSON.stringify("production"));var o=String(++A);this.streamId=o,setTimeout((function(){window.postMessage({type:"react-state-event-devTool-streamId",payload:r,id:o},"*")}),1e3),window.addEventListener("message",(function(e){e.origin===window.origin&&e.source===window&&"react-state-event-devTool-set"===e.data.type&&e.data.id===n.streamId&&(n.current=e.data.payload,n.callHandlers(e.data.payload))}))}var t=e.prototype;return t.subscribe=function(e,t){this.handlers.push({callback:e,onError:t})},t.unsubscribe=function(e){this.handlers=this.handlers.filter((function(t){return t.callback!==e}))},t.unsubscribeAll=function(){this.handlers=[]},t.getCurrent=function(){return this.current},t.publish=function(e){this.current=e,window.postMessage({type:"react-state-event-devTool-notify",payload:e,id:this.streamId},"*"),this.callHandlers(e)},t.error=function(e){this.handlers.forEach((function(t){if(!t.onError)throw e;t.onError(e)}))},t.callHandlers=function(e){this.handlers.forEach((function(t){try{t.callback(e)}catch(n){if(!t.onError)throw n;t.onError(n)}}))},e}(),N=function(){function e(e,t){var n=this;this.handlers=[],this.current=e,this.name=t,this.initTimer=setTimeout((function(){n.initialize()}),500),setTimeout((function(){window.postMessage({type:"react-state-event-initrequest",name:t},window.origin)}),1e3)}var t=e.prototype;return t.subscribe=function(e,t){var n=this;this.handlers.push({callback:e,onError:t}),window.addEventListener("message",(function(r){if(r.origin===window.origin&&r.source===window&&r.data.name===n.name){switch(r.data.type){case"react-state-event-initresponse":if(r.data.success){if(n.isInitialized())return;n.initialize()}break;case"react-state-event":n.initialize();break;case"react-state-event-initrequest":return void(n.isInitialized()&&window.postMessage({type:"react-state-event-initresponse",name:n.name,success:!0,payload:n.current},window.origin));default:return}if(r.data.success)try{n.current=r.data.payload,e(r.data.payload)}catch(o){if(!t)throw o;t(o)}else t&&t(r.data.payload)}}),!0)},t.isInitialized=function(){return null===this.initTimer},t.initialize=function(){null!=this.initTimer&&(clearTimeout(this.initTimer),this.initTimer=null)},t.unsubscribe=function(e){this.handlers=this.handlers.filter((function(t){return t.callback!==e})),window.removeEventListener("message",e,!0)},t.unsubscribeAll=function(){this.handlers.forEach((function(e){return window.removeEventListener("message",e.callback,!0)})),this.handlers=[]},t.getCurrent=function(){return this.current},t.publish=function(e){this.current=e,window.postMessage({type:"react-state-event",name:this.name,success:!0,payload:e},window.origin)},t.error=function(e){window.postMessage({type:"react-state-event",name:this.name,success:!1,payload:e},window.origin)},e}(),W=function(e,t){var n=Object(r.useState)(e.getCurrent()),o=n[0],i=n[1];Object(r.useEffect)((function(){var n=function(e){return i(e)};if(t){e.subscribe(n,(function(e){return t(e)}))}else e.subscribe(n);return function(){return e.unsubscribe(n)}}),[]);return[o,function(t){return e.publish(t)}]};W.propTypes={stateEvents:L.object.isRequired,onError:L.func};var J=function(e){var t=e.stateEvents,n=e.children,o=e.onError,i=Object(r.useState)(t.getCurrent()),a=i[0],s=i[1];return Object(r.useEffect)((function(){var e=function(e){return s(e)};if(o){t.subscribe(e,(function(e){return o(e)}))}else t.subscribe(e);return function(){return t.unsubscribe(e)}}),[]),n(a)};J.propTypes={stateEvents:L.object.isRequired,children:L.func.isRequired,onError:L.func};var B=n(3),D=function(e){var t=e.stateEvents,n=W(t,(function(e){console.log("FromHook handled error:",e)})),r=Object(B.a)(n,2),i=r[0],a=r[1];return o.a.createElement("span",null,i,o.a.createElement("button",{onClick:function(){return a(i+1)}},"increment"),o.a.createElement("button",{onClick:function(){return t.error("Error sent in FromHook")}},"Generate error"))},G=function(e){var t=e.stateEvents,n=function(){t.publish(t.getCurrent()+1)};return o.a.createElement(J,{stateEvents:t,onError:function(e){console.log("FromComponent handled error:",e)}},(function(e){return o.a.createElement("span",null,e,o.a.createElement("button",{onClick:n},"increment"),o.a.createElement("button",{onClick:function(){return t.error("Error sent in FromComponent")}},"Generate error"))}))},U=function(e){var t=new H(0,"single counter"),n=new N(0,"counter"),r=new N(0,"counter");return o.a.createElement("div",null,o.a.createElement("div",null,"Counter via useStateEvents hook: ",o.a.createElement(D,{stateEvents:t})),o.a.createElement("div",null,"Counter via Subscription class: ",o.a.createElement(G,{stateEvents:t})),o.a.createElement("div",null,"Counter via useSubject hook (External): ",o.a.createElement(D,{stateEvents:n})),o.a.createElement("div",null,"Counter via Subscription component (External): ",o.a.createElement(G,{stateEvents:r})))};a.a.render(o.a.createElement(U,null),document.getElementById("root"))},4:function(e,t,n){e.exports=n(13)},5:function(e,t,n){}},[[4,1,2]]]);
//# sourceMappingURL=main.7daaac70.chunk.js.map