/*! For license information please see main.4b6140da.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-state-events-example"]=this["webpackJsonpreact-state-events-example"]||[]).push([[0],[,function(e,t,n){e.exports={block:"common_block__1bPld",value:"common_value__MLPow",controls:"common_controls__19xhZ"}},function(e,t,n){e.exports={app:"App_app__2G9gN",mode:"App_mode__1xXi-",context:"App_context__2Dk5h",type:"App_type__2epyw"}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return H})),n.d(t,"d",(function(){return M}));var r=n(0),a=0,o=function(){function t(t,n,r){var o,i,s,c=this;void 0===n&&(n=!1),void 0===r&&(r=!1),this.handlers=[],this.current=t;var l=String(++a),u=n||""+l;this.streamId=l;var d=!!r;this.allowDebug=d||"undefined"!==typeof e&&("production"!==(null===(o=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===o?void 0:o.NODE_ENV)||"true"===(null===(i=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===i?void 0:i.REACT_STATE_EVENT_DEVTOOL)||"true"===(null===(s=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===s?void 0:s.REACT_APP_REACT_STATE_EVENT_DEVTOOL)),this.allowDebug&&(setTimeout((function(){window.postMessage({type:"react-state-event-devTool-streamId",payload:u,id:l,init:t},"*")}),1e3),window.addEventListener("message",(function(e){e.origin===window.origin&&e.source===window&&"react-state-event-devTool-set"===e.data.type&&e.data.id===c.streamId&&(c.current=e.data.payload,c.callHandlers(e.data.payload))})))}var n=t.prototype;return n.subscribe=function(e,t){this.handlers.push({callback:e,onError:t})},n.unsubscribe=function(e){this.handlers=this.handlers.filter((function(t){return t.callback!==e}))},n.unsubscribeAll=function(){this.handlers=[]},n.getCurrent=function(){return this.current},n.publish=function(e){this.current=e,this.allowDebug&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"StateEvents",streamId:this.streamId,success:!0,value:e}},"*"),this.callHandlers(e)},n.error=function(e){this.allowDebug&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"StateEvents",streamId:this.streamId,success:!1,value:e}},"*"),this.handlers.forEach((function(t){if(!t.onError)throw e;t.onError(e)}))},n.callHandlers=function(e){this.handlers.forEach((function(t){try{t.callback(e)}catch(n){if(!t.onError)throw n;t.onError(n)}}))},t}(),i=function(){function t(t,n,r){var a,o,i;void 0===r&&(r=!1),this.current=t,this.name=n,this.initTimer=null,this.timestamp=null,this.callbacks=[],this.handler=null,this.nape=n;var s=!!r;this.allowDebug=s||"undefined"!==typeof e&&("production"!==(null===(a=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===a?void 0:a.NODE_ENV)||"true"===(null===(o=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===o?void 0:o.REACT_STATE_EVENT_DEVTOOL)||"true"===(null===(i=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===i?void 0:i.REACT_APP_REACT_STATE_EVENT_DEVTOOL))}var n=t.prototype;return n.subscribe=function(e,t){var n=this;if(this.callbacks.push({callback:e,onError:t}),1===this.callbacks.length){var r=function(r){if(r.origin===window.origin&&r.source===window&&r.data.name===n.name){switch(r.data.type){case"react-state-event-initresponse":if(r.data.success){if(n.isInitialized())return;n.current=r.data.payload,n.initialize()}break;case"react-state-event":n.initialize();break;case"react-state-event-initrequest":return void(n.isInitialized()&&n.timestamp<r.data.timing&&window.postMessage({type:"react-state-event-initresponse",name:n.name,success:!0,payload:n.current,timing:n.timing},window.origin));default:return}if(r.data.success)try{n.current=r.data.payload,e(r.data.payload)}catch(a){if(!t)throw a;t(a)}else{if(!t)throw r.data.payload;t(r.data.payload)}}}.bind(this);this.handler={callback:e,wrappedCallback:r,onError:t},window.addEventListener("message",r,!0),window.postMessage({type:"react-state-event-initrequest",name:this.name,timing:Date.now(),init:this.current},window.origin),this.initTimer=setTimeout((function(){n.initialize()}),500)}},n.isInitialized=function(){return null!==this.timestamp},n.initialize=function(){null!==this.initTimer&&(clearTimeout(this.initTimer),this.initTimer=null,this.timestamp=Date.now())},n.uninitialize=function(){null!==this.initTimer&&(clearTimeout(this.initTimer),this.initTimer=null,this.timestamp=null)},n.unsubscribe=function(e){if(this.callbacks.find((function(t){return t.callback===e}))&&(this.callbacks=this.callbacks.filter((function(t){return t.callback!==e})),0===this.callbacks.length)){var t=this.handler.wrappedCallback;window.removeEventListener("message",t,!0),this.handler=null,this.uninitialize()}},n.unsubscribeAll=function(){if(this.handler){var e=this.handler.wrappedCallback;window.removeEventListener("message",e,!0),this.callbacks=[],this.handler=null,this.uninitialize()}},n.getCurrent=function(){return this.current},n.publish=function(e){this.current=e,window.postMessage({type:"react-state-event",name:this.name,success:!0,payload:e},window.origin),this.allowDebug&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"ExternalStateEvents",streamId:this.name,success:!0,value:e}},"*")},n.error=function(e){window.postMessage({type:"react-state-event",name:this.name,success:!1,payload:e},window.origin),this.allowDebug&&window.postMessage({type:"react-state-event-devTool-notify",payload:{streamType:"ExternalStateEvents",streamId:this.name,success:!0,value:e}},"*")},t}();function s(e,t){return e(t={exports:{}},t.exports),t.exports}var c="function"===typeof Symbol&&Symbol.for,l=c?Symbol.for("react.element"):60103,u=c?Symbol.for("react.portal"):60106,d=c?Symbol.for("react.fragment"):60107,f=c?Symbol.for("react.strict_mode"):60108,p=c?Symbol.for("react.profiler"):60114,m=c?Symbol.for("react.provider"):60109,E=c?Symbol.for("react.context"):60110,v=c?Symbol.for("react.async_mode"):60111,b=c?Symbol.for("react.concurrent_mode"):60111,h=c?Symbol.for("react.forward_ref"):60112,y=c?Symbol.for("react.suspense"):60113,_=c?Symbol.for("react.suspense_list"):60120,T=c?Symbol.for("react.memo"):60115,S=c?Symbol.for("react.lazy"):60116,O=c?Symbol.for("react.block"):60121,w=c?Symbol.for("react.fundamental"):60117,g=c?Symbol.for("react.responder"):60118,C=c?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case l:switch(e=e.type){case v:case b:case d:case p:case f:case y:return e;default:switch(e=e&&e.$$typeof){case E:case h:case S:case T:case m:return e;default:return t}}case u:return t}}}function D(e){return k(e)===b}var P={AsyncMode:v,ConcurrentMode:b,ContextConsumer:E,ContextProvider:m,Element:l,ForwardRef:h,Fragment:d,Lazy:S,Memo:T,Portal:u,Profiler:p,StrictMode:f,Suspense:y,isAsyncMode:function(e){return D(e)||k(e)===v},isConcurrentMode:D,isContextConsumer:function(e){return k(e)===E},isContextProvider:function(e){return k(e)===m},isElement:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===l},isForwardRef:function(e){return k(e)===h},isFragment:function(e){return k(e)===d},isLazy:function(e){return k(e)===S},isMemo:function(e){return k(e)===T},isPortal:function(e){return k(e)===u},isProfiler:function(e){return k(e)===p},isStrictMode:function(e){return k(e)===f},isSuspense:function(e){return k(e)===y},isValidElementType:function(e){return"string"===typeof e||"function"===typeof e||e===d||e===b||e===p||e===f||e===y||e===_||"object"===typeof e&&null!==e&&(e.$$typeof===S||e.$$typeof===T||e.$$typeof===m||e.$$typeof===E||e.$$typeof===h||e.$$typeof===w||e.$$typeof===g||e.$$typeof===C||e.$$typeof===O)},typeOf:k},N=(s((function(e,t){0})),s((function(e){e.exports=P})),Object.getOwnPropertySymbols),j=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;function A(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}})()&&Object.assign;var x="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function L(e,t,n,r,a){}L.resetWarningCache=function(){0};function I(){}function $(){}$.resetWarningCache=I;var W=s((function(e){e.exports=function(){function e(e,t,n,r,a,o){if(o!==x){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$,resetWarningCache:I};return n.PropTypes=n,n}()}));function M(e,t){var n=Object(r.useState)(e.getCurrent()),a=n[0],o=n[1];Object(r.useEffect)((function(){var n=function(e){return o(e)};if(t){e.subscribe(n,(function(e){return t(e)}))}else e.subscribe(n);return function(){return e.unsubscribe(n)}}),[]);return[a,function(t){return e.publish(t)}]}function H(e){var t=e.stateEvents,n=e.children,a=e.onError,o=Object(r.useState)(t.getCurrent()),i=o[0],s=o[1];return Object(r.useEffect)((function(){var e=function(e){return s(e)};if(a){t.subscribe(e,(function(e){return a(e)}))}else t.subscribe(e);return function(){return t.unsubscribe(e)}}),[]),"function"===typeof n?n(i):null}M.propTypes={stateEvents:W.object.isRequired,onError:W.func},H.propTypes={stateEvents:W.object.isRequired,children:W.func.isRequired,onError:W.func}}).call(this,n(6))},,,,,function(e,t,n){e.exports=n(17)},function(e,t,n){},,,,,,,,function(e,t,n){"use strict";n.r(t);n(9);var r=n(0),a=n.n(r),o=n(7),i=n(3),s=n(4),c=n(1),l=n.n(c),u=function(e){var t=e.stateEvents,n=Object(i.d)(t,(function(e){console.log("FromHook handled error:",e)})),r=Object(s.a)(n,2),o=r[0],c=r[1];return a.a.createElement("div",{className:l.a.block},a.a.createElement("div",{className:l.a.value},o),a.a.createElement("div",{className:l.a.controls},a.a.createElement("button",{onClick:function(){return c(o+1)}},"add"),a.a.createElement("button",{onClick:function(){return t.error("Error sent in FromHook")}},"error")))},d=function(e){var t=e.stateEvents,n=function(){t.publish(t.getCurrent()+1)};return a.a.createElement(i.c,{stateEvents:t,onError:function(e){console.log("FromComponent handled error:",e)}},(function(e){return a.a.createElement("div",{className:l.a.block},a.a.createElement("div",{className:l.a.value},e),a.a.createElement("div",{className:l.a.controls},a.a.createElement("button",{onClick:n},"add"),a.a.createElement("button",{onClick:function(){return t.error("Error sent in FromComponent")}},"error")))}))},f=function(e){var t=a.a.useState(!1),n=Object(s.a)(t,2),r=n[0],o=n[1];return r?a.a.createElement(a.a.Fragment,null,e.children||null):a.a.createElement("div",{className:l.a.block},a.a.createElement("div",{className:l.a.controls},a.a.createElement("button",{onClick:function(){o(!0)}},"Mount")))},p=n(2),m=n.n(p),E=function(){var e=new i.b(0,"single counter"),t=new i.a(0,"counter"),n=new i.a(0,"counter");return a.a.createElement("div",null,a.a.createElement("span",{className:m.a.mode},"production mode"),a.a.createElement("div",{className:m.a.app},a.a.createElement("div",{className:m.a.context},a.a.createElement("h1",null,"StateEvents"),a.a.createElement("div",null,a.a.createElement("div",{className:m.a.type},a.a.createElement("h2",null,"useStateEvents hook"),a.a.createElement(f,null,a.a.createElement(u,{stateEvents:e}))),a.a.createElement("div",{className:m.a.type},a.a.createElement("h2",null,"Subscription class"),a.a.createElement(f,null,a.a.createElement(d,{stateEvents:e}))))),a.a.createElement("div",{className:m.a.context},a.a.createElement("h1",null,"ExternalStateEvents"),a.a.createElement("div",null,a.a.createElement("div",{className:m.a.type},a.a.createElement("h2",null,"useStateEvents hook"),a.a.createElement(f,null,a.a.createElement(u,{stateEvents:t}))),a.a.createElement("div",{className:m.a.type},a.a.createElement("h2",null,"Subscription class"),a.a.createElement(f,null,a.a.createElement(d,{stateEvents:n})))))))},v=document.getElementById("root");Object(o.createRoot)(v).render(a.a.createElement(E,null))}],[[8,1,2]]]);
//# sourceMappingURL=main.4b6140da.chunk.js.map